{{ if eq .osid "windows" -}}
echo "--- Adding Scoop Buckets ---"

{{ range $name, $url := .packages.windows.scoop.buckets }}
scoop bucket add {{ $name }} {{ $url }}
{{ end -}}

echo "--- Installing Scoop Packages ---"

function Install-Or-Update-Scoop {
    param([string]$AppName)
    if (scoop list $AppName 2>$null 6>$null) { scoop update $AppName } else { scoop install $AppName }
}

{{ range $package := .packages.windows.scoop.packages }}
Install-Or-Update-Scoop {{ $package }}
{{ end -}}
{{ if not .headless }}
{{ range $app := .packages.windows.scoop.apps }}
Install-Or-Update-Scoop {{ $app }}
{{ end -}}
{{ end -}}
{{ end -}}